в 5 крупных городах
1. **Москва** – столица России и крупнейший город страны.
2. **Санкт-Петербург** – культурная столица, город музеев, каналов и дворцов.
3. **Новосибирск** – третий по численности населения город, крупнейший в Сибири.
4. **Екатеринбург** – центр Урала, город с развитой промышленностью и историей.
5. **Казань** – столица Татарстана, сочетающая русскую и татарскую культуру.
НЕВОЗМОЖНО СОЗДАТЬ ТАБЛИЦУ С 1600+КОЛОНОК В Postgresql

[Concepts — Citus 13.0.1 documentation](https://docs.citusdata.com/en/v13.0/get_started/concepts.html#query-execution)
[Чем Greenplum отличается от Citus с PostgreSQL, что выбирать](https://bigdataschool.ru/blog/news/greenplum/citus-with-postgresql-versus-greenplum.html#:~:text=Citus%20%D1%80%D0%B0%D0%B7%D0%B1%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%20%D0%B1%D0%BE%D0%BB%D1%8C%D1%88%D0%B8%D0%B5%20%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D1%8B%20%D0%BD%D0%B0,%D1%8D%D1%84%D1%84%D0%B5%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B%20%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D1%85%20%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%B2.)

Методы доступа к данным
- полно сканирование таблицы - sequential scan
- сканирование с использованием индекса:
	- индексное сканирование - index scan
	- сканирование по битовой карте - bitmap heap scan
	- сканирование только индекса - index only scan
### 1. **Startup Cost**

Это оценка затрат перед тем, как узел начнет выдавать первые строки. Включает:

- Инициализацию узла (например, загрузку индекса в память).
- Затраты на фильтрацию или сортировку перед первой выдачей данных.
- В случае вложенных циклов (nested loops) — время на подготовку первого прохода.

**Пример:**

- Для Seq Scan (`Sequential Scan`) startup cost ≈ 0, потому что он сразу начинает читать данные.
- Для Index Scan может быть выше, так как нужно загрузить индекс.
- Для Sort он может быть высоким, если сортировка выполняется полностью перед выдачей первой строки.

### 2. **Total Cost**

Общая оценка стоимости выполнения узла, т.е. сумма `Startup Cost` и всех затрат на обработку всех строк.

**Пример:**

- Для Seq Scan `Total Cost` — это стоимость чтения всей таблицы.
- Для Index Scan — суммарные затраты на поиск в индексе + чтение данных.
- Для Hash Join — стоимость построения хеш-таблицы + стоимость поиска в ней.
### Как правильно оценивать эффективность запроса:

1. **Сравнивай Total Cost для разных планов**
    
    - Если два плана отличаются только Total Cost, меньший cost обычно указывает на более эффективный запрос.
    - Однако **cost — это оценка**, а не реальное время выполнения.
2. **Смотри на `actual time` в `EXPLAIN ANALYZE`**
    
    - `EXPLAIN ANALYZE` показывает **реальное время выполнения запроса** (в миллисекундах).
    - Иногда PostgreSQL может ошибаться в оценке cost, и фактическое время выполнения будет отличаться.
3. **Сравни количество строк (`rows`) и итерации (`loops`)**
    
    - Если PostgreSQL ожидает 1000 строк, а на самом деле получает 10 000, это может указывать на плохую статистику.
    - **Большое количество `loops`** означает, что узел выполняется несколько раз (например, в `Nested Loop`).
4. **Оцени `Buffers` (если `EXPLAIN (ANALYZE, BUFFERS)`)**
    
    - Если много `shared hit` → данные кешированы (быстро).
    - Если много `shared read` → данные читаются с диска (медленнее).