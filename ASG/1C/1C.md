###### Выгрузка данных/отчетов/событий erp. из 1С в KAFKA.
1. В Kafka Топики автоматически создаются, можно их удалять в тесте(все кроме "технических")
2. 1C >> Интеграции >> Интеграция с kafka >> Настройки для передачи в kafka >> (можно выбрать все наименования кроме "Документ.РеализацияТоваровУслуг") >> Нажимаем "Первичная выгрузка".
###### Создать объект в "Отчеты и запросы для передачи в nifi" в 1C.
создать> тип данных "отчет СКД" > внешний отчет True > "Имя объекта во внешнем отчете" - оно берется из вкладки "Дополнительные отчеты и обработки", там выбирается какой-либо отчет и внутри отчета выбирается вкладка "дополнительная информация" там ищем "Имя объекта" и значение этого поля вставляем в "Имя объекта во внешнем отчете".
###### Отправка изменений в Kafka (АСГ) из 1С.
1. в поисковой строке вводим "Отправка изменений в Kafka" >
2. выбрать "выгрузка в автоматическом режиме" >> Выполнить.
###### Удаление объекта/записи из 1С
В поиске ввести "Удаление помеченных объектов"
###### Включить "режим технического специалиста"
Cервисы и настройки > Настройки > Параметры > Включить "Режим технического специалиста"
###### Посмотреть название объекта в конфигурации
Открыть во вкладке объект > нажать троеточие возле ссылки > "Информация для технического специалиста"
###### Справочник функций 1C
[ссылка](https://www.about1c.ru/v77/)
###### Работа с расчетом даты в 1С
[Работа с датами в 1С 8.3 на примерах](https://programmist1s.ru/daty-v-1s/)  
[ФУНКЦИИ ДАТ В 1С](https://www.1s-up.ru/funkcii-dat-v-1s/)
```c
ТекДата = КонецГода(ТекущаяДатаСеанса()); // конец года текущей даты
Сообщить("Текущая дата: " + ТекДата);
ТекДата1 = Формат(ТекущаяДатаСеанса(), "ДЛФ=Д"); // текущая дата в формате "05.02.2020" 
Сообщить("Текущая дата: " + ТекДата1);
ТекДата2 = Формат((ТекущаяДатаСеанса() + 14 * 60 * 60 * 24), "ДЛФ=Д"); // + 14 дней к текущей дате в формате "05.02.2020" 
Сообщить("Текущая дата: " + ТекДата2);
ТекДата3 = Формат(НачалоМесяца(ДобавитьМесяц(ТекущаяДатаСеанса(), 1)), "ДЛФ=Д"); // начало следующего месяца (от текущего) в формате "05.02.2020" 
Сообщить("Текущая дата: " + ТекДата3);
ТекДата4 = ((ТекущаяДата() - 14 * 60 * 60 * 24));
Сообщить("Текущая дата: " + ТекДата4);
Период1 = Новый СтандартныйПериод(НачалоМесяца(ДобавитьМесяц(ТекущаяДатаСеанса(), -2)),  НачалоМесяца(ДобавитьМесяц(ТекущаяДатаСеанса(), -1)));
Сообщить(Период1);

(ТекущаяДатаСеанса() - 86400 * 30) // вычесть 30 дней от текущего момента

// считаем период от конкретной даты
МояДата = Дата("20250113"); // 24.07.2013

Период2 = Новый СтандартныйПериод((МояДата - 86400 * 21), МояДата);

Сообщить(Период2);

//ДатаСинхронизации = Дата("20250201"); // 01.02.2025

Период1 = Новый СтандартныйПериод((ТекущаяДатаСеанса() - 86400 * 61), ТекущаяДатаСеанса());

Сообщить(Период1);

//стандартный период в таком фиде фильтрует данные 02.12.2024 00:00:00 - 01.02.2025 23:59:59

Синтаксис: Функция ДАТАВРЕМЯ(<Год>, <Месяц>, <День>, <Час>, <Минута>, <Секунда>)
ДатаВремя(2022,01,01,00,00,00)
```
###### Узнать тип значения в 1С
```c
ТекДата = ТекущаяДатаСеанса();
Сообщить("Текущая дата: " + ТекДата);
тип_значения = ТипЗнч(ТекДата);
Сообщить("Тип значени: " + тип_значения);
```
###### Запрос для поиска названия родительского отчета для варианта отчета 1С
```
ВЫБРАТЬ
    ВариантыОтчетов.Ссылка КАК Ссылка,
    ВариантыОтчетов.Наименование КАК НаименованиеВариантаОтчета,
    ВариантыОтчетов.Автор КАК Автор,
    ВариантыОтчетов.Отчет КАК НазваниеВнешнегоОтчета,
    ВариантыОтчетов.Пользовательский КАК Пользовательский,
    ВариантыОтчетов.Ссылка КАК Ссылка1,
    ВариантыОтчетов.Отчет.Ссылка КАК ОтчетСсылка,
    ВариантыОтчетов.Размещение.(
        Ссылка КАК Ссылка
    ) КАК Размещение,
    ВариантыОтчетов.Представления.(
        Ссылка КАК Ссылка
    ) КАК Представления
ИЗ
    Справочник.ВариантыОтчетов КАК ВариантыОтчетов
ГДЕ
    ВариантыОтчетов.Наименование ПОДОБНО "%19%" или ВариантыОтчетов.Наименование = "Отчет для BI  (с реализацией)" 
```
Затем в столбце `НазваниеВнешнегоОтчета` дважды кликаем на выпавший отчет и из поля `Имя` забираем название родительского отчета.

###### Запрос для поиска названия родительского отчета для варианта отчета 1С по автору отчета
```
ВЫБРАТЬ
    ВариантыОтчетов.Ссылка КАК Ссылка,
    ВариантыОтчетов.Наименование КАК НаименованиеВариантаОтчета,
    ВариантыОтчетов.Автор КАК Автор,
    ВариантыОтчетов.Отчет КАК НазваниеВнешнегоОтчета,
    ВариантыОтчетов.Пользовательский КАК Пользовательский,
    ВариантыОтчетов.Ссылка КАК Ссылка1,
    ВариантыОтчетов.Отчет.Ссылка КАК ОтчетСсылка,
    ВариантыОтчетов.Размещение.(
        Ссылка КАК Ссылка
    ) КАК Размещение,
    ВариантыОтчетов.Представления.(
        Ссылка КАК Ссылка
    ) КАК Представления
ИЗ
    Справочник.ВариантыОтчетов КАК ВариантыОтчетов
ГДЕ
    ВариантыОтчетов.Автор.Наименование ПОДОБНО "Грехов%"  
```
Затем в столбце `НазваниеВнешнегоОтчета` дважды кликаем на выпавший отчет и из поля `Имя` забираем название родительского отчета.
###### Поиск событий изменений/созданий объектов в 1C
на 30.08.24 в продуктиве 1C ERP используется только "Журнал регистрации" для отслеживания изменений в объектах. "Просмотр журнала изменений (Краткий)" - отключен и не информативен.

Необходимо открыть "Журнал регистрации".  
e1cib/app/Обработка.ЖурналРегистрации

1. Открыть "Установить Отбор"
2. Установить интересующий нас интервал
3. В "Метаданные" выбрать интересующий нас, например, справочник
4. Открыть "Данные"
5. В "Данные" выбрать тип данных, например, Партнер
6. Откроется окно справочника и там необходимо найти интересующий нас объект, после чего можно наживать "Применить и закрыть"
###### Проверка наличия не NULL значений
```
// проверка наличия NULL в столбце со ссылками
ЦеныНоменклатуры25.ХарактеристикаЦО.ССЫЛКА ЕСТЬ NULL
// проверка наличия не NULL в столбце со ссылками
НЕ ЦеныНоменклатуры25.ХарактеристикаЦО.ССЫЛКА ЕСТЬ NULL
// проверка наличия не NULL в столбце со ссылками
 ЦеныНоменклатуры25.ХарактеристикаЦО.ССЫЛКА ЕСТЬ НЕ NULL
```
###### Поиск уникального сочетания значений столбца
```
//50 081 530 строк в регистре
ВЫБРАТЬ distinct
    //ЦеныНоменклатуры25.Период КАК period_date,
    ЦеныНоменклатуры25.Регистратор КАК registrar_guid,
    //ЦеныНоменклатуры25.НомерСтроки КАК row_number,
    //ЦеныНоменклатуры25.Активность КАК is_activ,
    ЦеныНоменклатуры25.Номенклатура КАК nomenclature_guid,
    ЦеныНоменклатуры25.ВидЦены КАК price_type_guid
    //ЦеныНоменклатуры25.Цена КАК price,
    //ЦеныНоменклатуры25.Валюта КАК currency_guid
    //ЦеныНоменклатуры25.Формула КАК formula,
    //ЦеныНоменклатуры25.АСГ_ПравильнаяЦена КАК is_price_correct
ПОМЕСТИТЬ ВТ_строки
ИЗ РегистрСведений.ЦеныНоменклатуры25 КАК ЦеныНоменклатуры25;

ВЫБРАТЬ count(*)
ИЗ
    ВТ_строки;

УНИЧТОЖИТЬ ВТ_строки;
```